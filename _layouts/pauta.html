---
layout: default
---

  <div class="container">
    <div class="jumbotron">
      <h1 class="display-4">{{ page.title }}</h1>
      <p class="lead">{{ page.description }}</p>
      <hr class="my-4" />
      <div class="row">
        <div class="col-md-6">
          <p><strong>Casa:</strong> {{ page.casa }}</p>
        </div>
        <div class="col-md-6">
          <p><strong>Status:</strong> {{ page.status }}</p>
        </div>
      </div>
    </div>

    <div
      id="pauta-data"
      data-pauta-slug="{{ page.slug | default: page.title | slugify }}"
      data-casa-legislativa="{{ page.casa }}"
      data-is-plenary-vote="{{ page.is_plenary_vote | default: false }}"
    ></div>
    <div
      id="pauta-keyplayers-data"
      data-key-players="{{ page.key_players | jsonify | escape }}"
    ></div>
    <div
      id="pauta-campanha-data"
      data-campanha-email="{{ page.campanha.email | jsonify | escape }}"
      data-campanha-whatsapp="{{ page.campanha.whatsapp | jsonify | escape }}"
      data-campanha-instagram="{{ page.campanha.instagram | jsonify | escape }}"
    ></div>

    <div class="content-section mb-5">{{ content }}</div>

    {% if page.campanha %}
    <div class="campanhas-section mb-5">
      <h3>üì¢ Mobiliza√ß√£o</h3>
      <p>
        Sua participa√ß√£o √© fundamental! Contate os parlamentares diretamente
        para pressionar por apoio √†s nossas pautas.
      </p>

      <div class="alert alert-info" role="alert">
        <h5 class="alert-heading">√â f√°cil participar!</h5>
        <p>
          N√≥s j√° preparamos as mensagens e reunimos os contatos dispon√≠veis.
        </p>
        <hr />
        <p class="mb-0">
          üëá <strong>Basta clicar nos bot√µes abaixo</strong> para abrir seu
          aplicativo (Email, WhatsApp) com tudo pronto para enviar ou copiar a
          mensagem para o Instagram.
        </p>
      </div>
      <div class="row">
        {% if page.campanha.email %}
        <div class="col-md-4 mb-3">
          <button
            class="btn btn-primary btn-block"
            onclick="abrirCampanhaEmail()"
          >
            üìß Campanha de Email
          </button>
          <small id="contador-emails" class="text-muted">Carregando...</small>
        </div>
        {% endif %} {% if page.campanha.whatsapp %}
        <div class="col-md-4 mb-3">
          <button
            class="btn btn-success btn-block"
            onclick="abrirCampanhaWhatsApp()"
          >
            <span id="icon-whatsapp"></span> Campanha WhatsApp
          </button>
          <small id="contador-whatsapp" class="text-muted">Carregando...</small>
        </div>
        {% endif %} {% if page.campanha.instagram %}
        <div class="col-md-4 mb-3">
          <button
            class="btn btn-danger btn-block"
            onclick="abrirCampanhaInstagram()"
          >
            <span id="icon-instagram"></span> Campanha Instagram
          </button>
          <small id="contador-instagram" class="text-muted"
            >Carregando...</small
          >
        </div>
        {% endif %}
      </div>
    </div>
    {% endif %}

    <div class="card mb-4">
      <div class="card-body">
        <h5 class="card-title">üîç Filtrar Parlamentares</h5>
        <div class="row">
          <div class="col-md-3">
            <input
              type="text"
              class="form-control"
              id="filtro-nome"
              placeholder="Nome do parlamentar"
            />
          </div>
          <div class="col-md-2">
            <select class="form-control" id="filtro-estado">
              <option value="">Todos os Estados</option>
            </select>
          </div>
          <div class="col-md-3">
            <select class="form-control" id="filtro-posicao">
              <option value="">Todas as Posi√ß√µes</option>
              <option value="apoia">Apoia</option>
              <option value="contrario">Contr√°rio</option>
              <option value="nao-manifestado">N√£o se Manifestou</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-striped table-hover" id="tabela-parlamentares" style="font-size: 0.9em;">
        <thead class="thead-dark">
          <tr>
            <th>Nome</th>
            <th class="d-none d-md-table-cell">Partido</th>
            <th class="d-none d-md-table-cell">Estado</th>
            <th class="d-none d-md-table-cell">Fun√ß√£o</th>
            <th>Posi√ß√£o</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody id="tabela-parlamentares-corpo">
          <tr>
            <td colspan="6" class="text-center p-4">
              <div class="spinner-border spinner-border-sm" role="status">
                <span class="sr-only">Carregando...</span>
              </div>
              <span class="ml-2">Carregando parlamentares...</span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="modal fade" id="modalVerContato" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Contatos: <span id="contato-nome"></span></h5>
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
        </div>
        <div class="modal-body" id="contato-conteudo"></div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="modalEnviarInfo" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            Contribuir com Informa√ß√µes: <span id="enviar-info-nome"></span>
          </h5>
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <form id="formEnviarInfo">
            <input type="hidden" id="parlamentar-id-hidden" />
            <input type="hidden" id="parlamentar-nome-hidden" />

            <ul class="nav nav-tabs mb-3" id="infoTab" role="tablist">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  id="contatos-tab"
                  data-toggle="tab"
                  href="#contatos"
                  role="tab"
                  aria-controls="contatos"
                  aria-selected="true"
                  >üì± Contatos</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  id="evidencia-tab"
                  data-toggle="tab"
                  href="#evidencia"
                  role="tab"
                  aria-controls="evidencia"
                  aria-selected="false"
                  >üìÑ Evid√™ncia</a
                >
              </li>
            </ul>

            <div class="tab-pane fade show active" id="contatos" role="tabpanel" aria-labelledby="contatos-tab">
              <div class="alert alert-info py-2" style="font-size: 0.85em;">
                <small><strong>‚ÑπÔ∏è Adicione novos contatos</strong> ou <strong>sinalize informa√ß√µes incorretas</strong>. Dados de Email e Telefone de Gabinete v√™m das APIs oficiais.</small>
              </div>

              <h6><span class="text-primary font-weight-bold">Instagram Pessoal</span></h6>
              <div class="form-group">
                <label class="small mb-1" for="campo-instagram">Adicionar/Sugerir Instagram</label>
                <span id="instagram_atual" class="form-control form-control-sm bg-light" style="display: none;"></span>
                <input type="text" class="form-control form-control-sm" id="campo-instagram" placeholder="@usuario">
                
                <div class="form-check mt-1" id="instagram_correcao_div" style="display: none;">
                  <input class="form-check-input" type="checkbox" value="" id="corrigir_instagram_check">
                  <label class="form-check-label small text-danger" for="corrigir_instagram_check">
                    O Instagram acima est√° incorreto?
                  </label>
                  <input type="text" class="form-control form-control-sm mt-1" id="corrigir_instagram_valor" placeholder="Digite o @ correto aqui..." style="display: none;">
                </div>
              </div>

              <hr class="my-3">

              <h6><span class="text-primary font-weight-bold">WhatsApp Pessoal</span></h6>
              <div class="form-group">
                 <label class="small mb-1">N√∫meros Atuais (Comunidade):</label>
                 <div id="whatsapp_atual_lista" class="mb-2 small text-muted" style="padding-left: 10px;">Nenhum cadastrado.</div>
                 
                 <label class="small mb-1" for="campo-whatsapp">Adicionar Novo N√∫mero</label>
                 <input type="text" class="form-control form-control-sm" id="campo-whatsapp" placeholder="(XX) XXXXX-XXXX (somente n√∫meros)">
                 
                 <div class="form-check mt-1" id="whatsapp_correcao_div" style="display: none;">
                   <input class="form-check-input" type="checkbox" value="" id="corrigir_whatsapp_check">
                   <label class="form-check-label small text-danger" for="corrigir_whatsapp_check">
                     Algum n√∫mero acima est√° incorreto ou desatualizado?
                   </label>
                   <textarea class="form-control form-control-sm mt-1" id="corrigir_whatsapp_obs" rows="2" placeholder="Explique qual n√∫mero est√° errado ou d√™ mais detalhes..." style="display: none;"></textarea>
                 </div>
              </div>
              
              <hr class="my-3">

              <h6><span class="text-primary font-weight-bold">Assessores</span></h6>
               <label class="small mb-1">Assessores Atuais (Comunidade):</label>
               <div id="assessores_atual_lista" class="mb-2" style="font-size: 0.85em;">Nenhum cadastrado.</div>
               
               <div class="form-check mb-2" id="assessores_correcao_div" style="display: none;">
                 <input class="form-check-input" type="checkbox" value="" id="corrigir_assessores_check">
                 <label class="form-check-label small text-danger" for="corrigir_assessores_check">
                   As informa√ß√µes dos assessores acima est√£o incorretas/desatualizadas?
                 </label>
                 <textarea class="form-control form-control-sm mt-1" id="corrigir_assessores_obs" rows="2" placeholder="Explique o que est√° errado (Ex: Nome, WhatsApp, saiu, etc)..." style="display: none;"></textarea>
               </div>
               
               <label class="small mb-1">Adicionar Novos Assessores:</label>
               <div id="assessores-lista" class="mb-2">
                  </div>
              <button type="button" class="btn btn-sm btn-outline-secondary" onclick="adicionarAssessor()">+ Adicionar Assessor</button>
            </div>

              <div
                class="tab-pane fade"
                id="evidencia"
                role="tabpanel"
                aria-labelledby="evidencia-tab"
              >
                <div class="alert alert-info py-2" style="font-size: 0.85em">
                  <small
                    ><strong>‚ÑπÔ∏è Envie um link</strong> (not√≠cia, v√≠deo,
                    documento) que comprove o posicionamento do parlamentar
                    sobre <strong>esta pauta espec√≠fica</strong>.</small
                  >
                </div>
                <h6>
                  <span class="text-primary font-weight-bold"
                    >Evid√™ncia de Posicionamento (Sobre esta Pauta)</span
                  >
                </h6>
                <div class="form-row">
                  <div class="form-group col-md-4">
                    <label class="small mb-1" for="campo-evidencia-tipo"
                      >Tipo</label
                    >
                    <select
                      class="form-control form-control-sm"
                      id="campo-evidencia-tipo"
                    >
                      <option value="link">Link/Not√≠cia</option>
                      <option value="video">V√≠deo</option>
                      <option value="audio">√Åudio</option>
                      <option value="documento">Documento</option>
                    </select>
                  </div>
                  <div class="form-group col-md-8">
                    <label class="small mb-1" for="campo-evidencia-url"
                      >URL da Evid√™ncia</label
                    >
                    <input
                      type="url"
                      class="form-control form-control-sm"
                      id="campo-evidencia-url"
                      placeholder="https://..."
                    />
                  </div>
                </div>
                <div class="form-group">
                  <label class="small mb-1" for="campo-evidencia-desc"
                    >Breve Descri√ß√£o (Opcional)</label
                  >
                  <textarea
                    class="form-control form-control-sm"
                    id="campo-evidencia-desc"
                    rows="2"
                    placeholder="Ex: Votou a favor na comiss√£o X em DD/MM/AAAA"
                  ></textarea>
                </div>
              </div>
            </div>

            <hr class="my-4" />

            <h6>
              <span class="text-secondary font-weight-bold"
                >Seus Dados (Opcional)</span
              >
            </h6>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label class="small mb-1" for="campo-usuario-nome"
                  >Seu Nome</label
                >
                <input
                  type="text"
                  class="form-control form-control-sm"
                  id="campo-usuario-nome"
                  placeholder="Opcional"
                />
              </div>
              <div class="form-group col-md-6">
                <label class="small mb-1" for="campo-usuario-email"
                  >Seu Email</label
                >
                <input
                  type="email"
                  class="form-control form-control-sm"
                  id="campo-usuario-email"
                  placeholder="Opcional (para contato)"
                />
              </div>
            </div>
            <small class="text-muted d-block mb-3"
              >Seu nome e email s√£o opcionais, mas podem ser √∫teis caso
              precisemos de esclarecimentos sobre a informa√ß√£o enviada.</small
            >

            <button type="submit" class="btn btn-primary">
              ‚úÖ Enviar Contribui√ß√£o
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="modalCampanhaEmail" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">üìß Campanha de Email</h5>
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label><strong>Objetivo da Campanha:</strong></label>
            <div>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  name="objetivoEmail"
                  id="objetivoEmailPedir"
                  value="pedir"
                  checked
                />
                <label class="form-check-label" for="objetivoEmailPedir"
                  >Pedir Apoio (Oposi√ß√£o/Neutros)</label
                >
              </div>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  name="objetivoEmail"
                  id="objetivoEmailAgradecer"
                  value="agradecer"
                />
                <label class="form-check-label" for="objetivoEmailAgradecer"
                  >Agradecer (Apoiadores)</label
                >
              </div>
            </div>
          </div>
          <hr />
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="filtro-campanha-estado-email"
                >Filtrar por Estado:</label
              >
              <select
                class="form-control form-control-sm"
                id="filtro-campanha-estado-email"
              >
                <option value="">Todos os Estados</option>
              </select>
            </div>
            <div class="col-md-6">
              <label for="campo-nome-email">Seu Nome (Opcional):</label>
              <input
                type="text"
                class="form-control form-control-sm"
                id="campo-nome-email"
                placeholder="Para prefixo da mensagem"
              />
            </div>
          </div>

          <p>
            <strong>Total Selecionado:</strong>
            <span id="total-emails-campanha"></span>
          </p>
          <div class="form-group position-relative">
            <label>Lista de Emails (CCO)</label>
            <textarea
              class="form-control"
              id="emails-lista"
              rows="3"
              readonly
            ></textarea>
            <span
              class="copy-icon"
              title="Copiar lista de emails"
              onclick="copiarParaClipboard('emails-lista', this)"
            ></span>
          </div>
          <div class="form-group position-relative">
            <label>Assunto</label>
            <input type="text" class="form-control" id="email-assunto" />
            <span
              class="copy-icon"
              title="Copiar assunto"
              onclick="copiarParaClipboard('email-assunto', this)"
            ></span>
          </div>
          <div class="form-group position-relative">
            <label>Mensagem</label>
            <textarea
              class="form-control"
              id="email-mensagem"
              rows="8"
            ></textarea>
            <span
              class="copy-icon"
              title="Copiar mensagem"
              onclick="copiarParaClipboard('email-mensagem', this)"
            ></span>
          </div>
          <button class="btn btn-primary" onclick="abrirClienteEmail()">
            üìß Abrir no Cliente de Email
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="modalCampanhaWhatsApp" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <span id="icon-whatsapp-2"></span> Campanha WhatsApp
          </h5>
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="filtro-campanha-estado-wa">
              <strong>Filtrar por seu Estado (Opcional)</strong>
            </label>
            <select class="form-control" id="filtro-campanha-estado-wa">
              <option value="">Todos os Estados</option>
            </select>
          </div>

          <div class="form-group">
            <label for="campo-nome-wa">Seu Nome (Opcional)</label>
            <input
              type="text"
              class="form-control"
              id="campo-nome-wa"
              placeholder="Digite seu nome..."
            />
          </div>

          <p id="total-whatsapp"><strong>Total:</strong> Calculando...</p>
          <div class="progress mb-3">
            <div
              id="progress-whatsapp"
              class="progress-bar"
              role="progressbar"
              style="width: 0%"
            >
              0/0
            </div>
          </div>

          <textarea
            id="whatsapp-mensagem-apoio"
            class="hidden-textarea"
          ></textarea>
          <textarea
            id="whatsapp-mensagem-oposicao"
            class="hidden-textarea"
          ></textarea>

          <div
            id="lista-whatsapp"
            style="max-height: 400px; overflow-y: auto"
          ></div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="modalCampanhaInstagram" tabindex="-1">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">
            <span id="icon-instagram-2"></span> Campanha Instagram
          </h5>
          <button type="button" class="close" data-dismiss="modal">
            &times;
          </button>
        </div>
        <div class="modal-body">
          <div class="row mb-3">
            <div class="col-md-6">
              <label for="filtro-campanha-estado-ig" class="small mb-1"
                >Filtrar por Estado:</label
              >
              <select
                class="form-control form-control-sm"
                id="filtro-campanha-estado-ig"
              >
                <option value="">Todos os Estados</option>
              </select>
            </div>
            <div class="col-md-6">
              <label for="campo-nome-ig" class="small mb-1"
                >Seu Nome (Opcional):</label
              >
              <input
                type="text"
                class="form-control form-control-sm"
                id="campo-nome-ig"
                placeholder="Para prefixo da mensagem"
              />
            </div>
          </div>

          <p class="mb-1 small">
            <strong>Total Selecionado:</strong>
            <span id="total-instagram"></span>
          </p>
          <div class="progress mb-3" style="height: 20px">
            <div
              id="progress-instagram"
              class="progress-bar bg-danger"
              role="progressbar"
              style="width: 0%; background-color: #e4405f !important"
              aria-valuenow="0"
              aria-valuemin="0"
              aria-valuemax="100"
            >
              0/0
            </div>
          </div>

          <textarea
            id="instagram-mensagem-oposicao"
            class="hidden-textarea"
          ></textarea>
          <textarea
            id="instagram-mensagem-apoio"
            class="hidden-textarea"
          ></textarea>

          <div
            class="alert alert-warning py-2 mt-2"
            role="alert"
            style="font-size: 0.85em"
          >
            <small
              ><strong>‚ö†Ô∏è Aten√ß√£o:</strong> Ao clicar em "Abrir Direct", a
              mensagem correta (pedido ou agradecimento) ser√°
              <strong>copiada</strong> para sua √°rea de transfer√™ncia. Devido a
              limita√ß√µes do Instagram, voc√™ precisar√°
              <strong>colar manualmente</strong> a mensagem no Direct que ser√°
              aberto.</small
            >
          </div>
          <div
            id="lista-instagram"
            style="
              max-height: 400px;
              overflow-y: auto;
              border: 1px solid #eee;
              border-radius: 5px;
              padding-top: 5px;
              padding-bottom: 5px;
            "
          ></div>
        </div>
      </div>
    </div>
  </div>

  <div
    id="tracking-container"
    style="
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: white;
      border: 2px solid #667eea;
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      display: none;
      z-index: 1000;
    "
  >
    <h6 style="margin: 0 0 10px 0">üìä Seu Progresso</h6>
    <div id="tracking-items"></div>
    <button
      onclick="fecharTracking()"
      style="
        margin-top: 10px;
        background: none;
        border: none;
        color: #999;
        font-size: 12px;
        cursor: pointer;
      "
    >
      Fechar
    </button>
  </div>
