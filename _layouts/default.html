<!DOCTYPE html>
<html lang="pt-br">
  {% include head.html %}
  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
          <a class="navbar-brand" href="{{ '/' | relative_url }}">
            Pautas Socioeducativas
            <small
              style="
                font-size: 0.6em;
                display: block;
                color: rgba(255, 255, 255, 0.7);
              "
              >Monitoramento e Mobilização</small
            >
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item active">
                <a class="nav-link" href="{{ '/' | relative_url }}">Início</a>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="{{ '/agradecimentos.html' | relative_url }}"
                  >Agradecimentos</a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main role="main" class="container mt-4">{{ content }}</main>

    {% include footer.html %}

    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    {% if page.layout == 'pauta' %}
    <script src="/assets/js/pauta.js" defer></script>
    {% endif %}
    <!-- Toast container -->
    <div
      aria-live="polite"
      aria-atomic="true"
      style="position: fixed; top: 1rem; right: 1rem; z-index: 1080"
    >
      <div id="toast-container"></div>
    </div>

    <script>
      // showToast(message, type) - type: 'success' | 'error' | 'info'
      function showToast(message, type = "info", timeout = 4000) {
        try {
          const container = document.getElementById("toast-container");
          if (!container) {
            alert(message); // fallback
            return;
          }

          const toastId = "toast-" + Date.now();
          const bgClass =
            type === "success"
              ? "bg-success"
              : type === "error"
              ? "bg-danger"
              : "bg-secondary";

          const toast = document.createElement("div");
          toast.id = toastId;
          toast.className = "toast text-white " + bgClass;
          toast.role = "alert";
          toast.ariaLive = "assertive";
          toast.ariaAtomic = "true";
          toast.style.minWidth = "220px";

          toast.innerHTML = `
            <div class="d-flex">
              <div class="toast-body">${message}</div>
              <button type="button" class="ml-2 mb-1 close text-white" data-dismiss="toast" aria-label="Fechar" style="opacity:0.9;background:none;border:none">&times;</button>
            </div>
          `;

          container.appendChild(toast);
          // Initialize bootstrap toast
          $(toast).toast({ delay: timeout });
          $(toast).toast("show");

          // Remove after hidden
          $(toast).on("hidden.bs.toast", function () {
            try {
              container.removeChild(toast);
            } catch (e) {}
          });
        } catch (e) {
          try {
            alert(message);
          } catch (_) {}
        }
      }
    </script>
  </body>
</html>
