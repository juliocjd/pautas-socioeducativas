<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Admin - Pautas Socioeducativas</title>
    <link rel="stylesheet" href="gerador.css">
</head>
<body>
    <div class="container">
        <h1>üèõÔ∏è Painel Administrativo</h1>
        <p class="subtitle">Gerencie pautas, contribui√ß√µes e mobiliza√ß√£o</p>
        
        <div id="loginScreen">
            <div class="output">
                <h3>üîê Acesso Restrito</h3>
                <p style="margin-bottom: 20px; color: #666;">Digite a senha para acessar:</p>
                <div style="display: flex; gap: 10px;">
                    <input type="password" id="passwordInput" placeholder="Digite a senha..." style="flex: 1;" onkeypress="if(event.key==='Enter') login()">
                    <button onclick="login()" class="btn">Entrar</button>
                </div>
                <p id="loginError" class="loading error hidden" style="margin-top: 15px;"></p>
            </div>
        </div>
        
        <div id="mainContent" class="hidden">
            <div class="tabs">
                <button class="tab active" onclick="showTab('criar')">‚ûï Criar Pauta</button>
                <button class="tab" onclick="showTab('gerenciar')">üìã Gerenciar Pautas</button>
                <button class="tab" onclick="showTab('contribuicoes')">üì¨ Contribui√ß√µes</button>
                <button class="tab" onclick="showTab('dados')">üíæ Dados Cadastrados</button>
                <button class="tab" onclick="showTab('estatisticas')">üìä Estat√≠sticas</button>
            </div>
            
            <div id="tab-criar" class="tab-content active">
                <div id="loadingDeputados" class="loading hidden">
                    <div class="spinner"></div>
                    <span>Carregando parlamentares...</span>
                </div>
                
                <form id="pautaForm" onsubmit="gerarPauta(event)">
                    <div class="form-group">
                        <label for="title">T√≠tulo da Pauta *</label>
                        <input type="text" id="title" required placeholder="Ex: PEC 18/2025">
                    </div>
                    
                    <div class="form-group">
                        <label for="description">Descri√ß√£o *</label>
                        <textarea id="description" required placeholder="Descri√ß√£o curta..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="casa">Casa Legislativa *</label>
                        <select id="casa" required>
                            <option value="">Selecione...</option>
                            <option value="C√¢mara dos Deputados">C√¢mara dos Deputados</option>
                            <option value="Senado Federal">Senado Federal</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="status">Status *</label>
                        <input type="text" id="status" required placeholder="Ex: Em tramita√ß√£o">
                    </div>
                    
                    <div class="form-group">
                        <label for="body">Conte√∫do da P√°gina</label>
                        <textarea id="body" rows="8" placeholder="Conte√∫do em HTML ou texto..."></textarea>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="featured" onchange="handleFeaturedChange()">
                            <label for="featured" style="margin: 0;">‚≠ê Pauta Principal (destaque no index)</label>
                        </div>
                        <small style="color: #666; margin-left: 30px;">Esta pauta aparecer√° como "Nossa luta principal" na p√°gina inicial</small>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" id="is_plenary_vote" onchange="handlePlenaryVoteChange()">
                            <label for="is_plenary_vote" style="margin: 0;">üèõÔ∏è Vota√ß√£o em Plen√°rio (todos os parlamentares)</label>
                        </div>
                        <small style="color: #666; margin-left: 30px;">Quando marcado, a mobiliza√ß√£o incluir√° TODOS os parlamentares em exerc√≠cio</small>
                    </div>
                    
                    <div class="form-group" id="membrosChaveSection">
                        <label>Membros-Chave</label>
                        <div id="infoMembrosChave" class="alert alert-info hidden">
                            ‚ÑπÔ∏è Como esta √© uma vota√ß√£o em plen√°rio, n√£o √© necess√°rio selecionar membros-chave. A mobiliza√ß√£o incluir√° automaticamente todos os parlamentares em exerc√≠cio.
                        </div>
                        <div id="parlamentaresList">
                            <p style="color: #999; text-align: center;">Nenhum parlamentar adicionado</p>
                        </div>
                       
                        <div id="modalAddParlamentar" tabindex="-1">
                          <div class="modal-dialog" style="max-width: none;">
                            <div class="modal-content" style="border: none; box-shadow: none; padding: 0;">
                              
                              <div class="modal-body" style="padding: 10px 0 0 0;">
                                <div class="form-group">
                                  <label for="autocomplete-input">Buscar por nome:</label>
                                  <div class="autocomplete-container">
                                    <input 
                                      type="text" 
                                      id="autocomplete-input" 
                                      class="autocomplete-input" 
                                      placeholder="Digite o nome do parlamentar..."
                                      autocomplete="off"
                                    >
                                    <div id="autocomplete-list" class="autocomplete-list"></div>
                                  </div>
                                  <small class="text-muted">Digite pelo menos 2 letras para buscar</small>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        </div>
                    
                    <div class="campanha-section">
                        <h4>üì¢ Configurar Campanhas de Mobiliza√ß√£o</h4>
                        <p style="color: #666; margin-bottom: 20px;">
                            Configure textos diferentes para quem apoia (agradecimento) e para quem n√£o apoia (pedido).
                        </p>
                        
                        <div class="campanha-canal">
                            <h5>üìß Email</h5>
                            <div class="form-group">
                                <label>Assunto do Email</label>
                                <input type="text" id="email-assunto" placeholder="Ex: Solicita√ß√£o de Apoio √† PEC 18/2025">
                            </div>

                            <div class="campanha-sub-canal">
                                <label><strong>Mensagem (Oposi√ß√£o/Neutro)</strong></label>
                                <textarea id="email-mensagem-oposicao" rows="5" placeholder="Exmo(a) Sr(a) Deputado(a) [NOME]..."></textarea>
                                <small style="color: #666;">Texto para quem √© "Contr√°rio" ou "N√£o se manifestou".</small>
                            </div>

                            <div class="campanha-sub-canal">
                                <label><strong>Mensagem (Apoio/Agradecimento)</strong></label>
                                <textarea id="email-mensagem-apoio" rows="4" placeholder="Exmo(a) Sr(a) Deputado(a) [NOME], obrigado pelo seu apoio..."></textarea>
                                <small style="color: #666;">Texto para quem j√° "Apoia" a pauta.</small>
                            </div>
                            <small style="color: #666; margin-top: 15px; display: block;">üí° Use: [NOME]</small>
                        </div>
                        
                        <div class="campanha-canal">
                            <h5>üí¨ WhatsApp</h5>
                            
                            <div class="campanha-sub-canal">
                                <label><strong>Mensagem (Oposi√ß√£o/Neutro)</strong></label>
                                <textarea id="whatsapp-mensagem-oposicao" rows="4" placeholder="Ol√°! Sou eleitor e pe√ßo seu apoio..."></textarea>
                                <small style="color: #666;">Texto para quem √© "Contr√°rio" ou "N√£o se manifestou".</small>
                            </div>

                            <div class="campanha-sub-canal">
                                <label><strong>Mensagem (Apoio/Agradecimento)</strong></label>
                                <textarea id="whatsapp-mensagem-apoio" rows="3" placeholder="Ol√°, [NOME]! Obrigado por apoiar nossa pauta..."></textarea>
                                <small style="color: #666;">Texto para quem j√° "Apoia" a pauta.</small>
                            </div>
                            <small style="color: #666; margin-top: 15px; display: block;">üí° Use: [NOME]</small>
                        </div>
                        
                        <div class="campanha-canal">
                            <h5>üì∑ Instagram</h5>

                            <div class="campanha-sub-canal">
                                <label><strong>Mensagem (Oposi√ß√£o/Neutro)</strong></label>
                                <textarea id="instagram-mensagem-oposicao" rows="3" placeholder="Oi! Conto com seu apoio..."></textarea>
                                <small style="color: #666;">Texto para quem √© "Contr√°rio" ou "N√£o se manifestou".</small>
                            </div>

                            <div class="campanha-sub-canal">
                                <label><strong>Mensagem (Apoio/Agradecimento)</strong></label>
                                <textarea id="instagram-mensagem-apoio" rows="3" placeholder="Oi, [NOME]! Obrigado pelo apoio!"></textarea>
                                <small style="color: #666;">Texto para quem j√° "Apoia" a pauta.</small>
                            </div>
                            <small style="color: #666; margin-top: 15px; display: block;">üí° Use: [NOME]</small>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn">üéØ Gerar Pauta</button>
                </form>
                
                <div id="outputCriar" class="output hidden">
                    <h3>‚úÖ Pauta Criada!</h3>
                    <p>Nome do arquivo: <strong id="filenameOutput"></strong></p>
                    <div class="code-output" id="codeOutput"></div>
                    <button class="btn" onclick="copiarCodigo()">üìã Copiar</button>
                </div>
            </div>
            
            <div id="tab-gerenciar" class="tab-content">
                <input type="text" id="searchPautas" class="search-input" placeholder="üîç Buscar pauta..." oninput="filterPautas()">
                
                <div id="loadingPautas" class="loading">
                    <div class="spinner"></div>
                    <span>Carregando pautas...</span>
                </div>
                
                <div id="pautasGrid" class="grid"></div>
            </div>

            <div id="tab-contribuicoes" class="tab-content">
                <h3>üì¨ Contribui√ß√µes Pendentes de Aprova√ß√£o</h3>
                <p style="color: #666; margin-bottom: 20px;">
                    Revise as contribui√ß√µes enviadas pelos usu√°rios e aprove seletivamente.
                </p>
                
                <div id="loadingContribuicoes" class="loading">
                    <div class="spinner"></div>
                    <span>Carregando contribui√ß√µes...</span>
                </div>
                
                <div id="contribuicoesLista"></div>
                
                <div id="semContribuicoes" class="hidden" style="text-align: center; padding: 40px; color: #999;">
                    <h4>üéâ Nenhuma contribui√ß√£o pendente!</h4>
                    <p>Quando usu√°rios enviarem informa√ß√µes, aparecer√£o aqui.</p>
                </div>
            </div>

            <div id="tab-dados" class="tab-content">
                <h3>üíæ Dados Cadastrados dos Congressistas</h3>
                
                <div class="form-group">
                    <input type="text" id="searchDados" class="search-input" placeholder="üîç Buscar por nome..." oninput="filtrarDados()">
                </div>
                
                <div id="loadingDados" class="loading">
                    <div class="spinner"></div>
                    <span>Carregando dados...</span>
                </div>
                
                <div id="dadosLista" class="grid"></div>
            </div>

            <div id="tab-estatisticas" class="tab-content">
                <h3>üìä Estat√≠sticas de Mobiliza√ß√£o</h3>
                
                <div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                    <div class="card">
                        <div class="card-title" id="stat-total-pautas">0</div>
                        <div class="card-info">Pautas Cadastradas</div>
                    </div>
                    <div class="card">
                        <div class="card-title" id="stat-total-contribuicoes">0</div>
                        <div class="card-info">Contribui√ß√µes Recebidas</div>
                    </div>
                    <div class="card">
                        <div class="card-title" id="stat-total-dados">0</div>
                        <div class="card-info">Congressistas com Dados Extras</div>
                    </div>
                    <div class="card">
                        <div class="card-title" id="stat-total-evidencias">0</div>
                        <div class="card-info">Evid√™ncias Cadastradas</div>
                    </div>
                </div>
                
                <button class="btn btn-secondary" onclick="atualizarEstatisticas()">üîÑ Atualizar</button>
            </div>
        </div>
    </div>
    
    <script src="gerador.js" defer></script>

</body>
</html>
